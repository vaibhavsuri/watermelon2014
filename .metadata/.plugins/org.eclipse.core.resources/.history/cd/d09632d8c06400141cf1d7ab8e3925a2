package watermelon.group5;

import java.util.ArrayList;
import java.util.List;
import java.util.Random;

import watermelon.sim.Pair;
import watermelon.sim.Point;
import watermelon.sim.seed;
public class Moving {

	 public static List<seed> moveAround(
			  List<seed> seedList, 
			  List<Pair>treeList,
			  double s,
			  double width,
			  double length){
			int maxIteration = 200;
			
			int rand = 0;
			while (maxIteration > 0){
				rand = (int) (Math.random() * seedList.size());
				seed randomSeed = seedList.remove(rand);
				moveAround(seedList, randomSeed, treeList, s, width, length);
				maxIteration--;
			}
			
		 return seedList;
	 }
	
  // start is not included in the seedList
  public static void moveAround(
		  List<seed> seedList, 
		  seed start,
		  List<Pair>treeList,
		  double s,
		  double width,
		  double length){
	  
	  	
	  double deltaAngle = 1;
	  double deltaPosition = 0.001;
	  seedList.add(start);
	  double bestScore = PlayerUtil.calculatescore(seedList, s);
	  seedList.remove(seedList.size()-1);
	  seed temp = new seed(start.x, start.y, start.tetraploid);
	  
	  for ( double theta = 0 ; theta < 360 ; theta += deltaAngle){
		  double deltaX = Math.cos(Math.toRadians(theta)) * deltaPosition;
		  double deltaY = Math.sin(Math.toRadians(theta)) * deltaPosition;
		  while(true){
			  temp.x += deltaX;
			  temp.y += deltaY;
			  seedList.add(temp);
			  if(!PlayerUtil.validateseed(seedList, width, length, treeList)){
				  seedList.remove(seedList.size()-1);
				  break;
			  }else{
				  seedList.remove(seedList.size()-1);
			  }
			  
			  double tempScore = PlayerUtil.calculatescore(seedList, s);
			  
			  if (tempScore > bestScore ){
				  start.x = temp.x;
				  start.y = temp.y;
				  bestScore = tempScore;
			  }
			  
		  }
		 
		  
	  }
	  seedList.add(start);	  
  }
	
}
